<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Annual Leave Bidding System</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .gradient-blue {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }
        
        .gradient-purple {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        
        .gradient-red {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        
        .gradient-green {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4 md:p-6">
    <div id="app" class="max-w-7xl mx-auto">
        <!-- Loading Screen -->
        <div id="loadingScreen" class="fixed inset-0 bg-white flex flex-col items-center justify-center z-50">
            <div class="loading-spinner mb-4"></div>
            <p class="text-gray-600 font-semibold">Initializing system...</p>
            <p id="loadingMessage" class="text-sm text-gray-500 mt-2"></p>
        </div>

        <!-- Header -->
        <div class="mb-8 text-center fade-in">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">
                Annual Leave Bidding System
            </h1>
            <div id="userInfo" class="hidden flex justify-center items-center gap-4 mt-4">
                <div class="bg-white px-4 py-2 rounded-lg shadow">
                    <span class="text-sm text-gray-600">Logged in as: </span>
                    <span id="currentUserName" class="font-semibold"></span>
                    <span id="userTypeBadge" class="ml-2 px-2 py-1 text-xs rounded"></span>
                </div>
                <button
                    onclick="handleLogout()"
                    class="px-4 py-2 gradient-red text-white rounded-lg hover:shadow-lg font-semibold transition-shadow"
                >
                    Logout
                </button>
            </div>
        </div>

        <!-- Login View (initial view) -->
        <div id="loginView" class="max-w-md mx-auto mt-10 fade-in">
            <div class="bg-white rounded-xl shadow-xl p-8">
                <h1 class="text-2xl font-bold text-center mb-6 text-blue-600">
                    Annual Leave Bidding System
                </h1>
                
                <div class="mb-6">
                    <label class="block font-semibold mb-3">Login As:</label>
                    <div class="flex gap-4">
                        <button
                            id="loginTypeEmployee"
                            onclick="setLoginType('employee')"
                            class="flex-1 px-4 py-3 rounded-lg font-semibold gradient-blue text-white"
                        >
                            Employee
                        </button>
                        <button
                            id="loginTypePlanner"
                            onclick="setLoginType('planner')"
                            class="flex-1 px-4 py-3 rounded-lg font-semibold bg-gray-200 text-gray-700"
                        >
                            Planner
                        </button>
                    </div>
                </div>

                <div id="loginForm">
                    <!-- Employee login fields will be inserted here -->
                </div>

                <button
                    onclick="handleLogin()"
                    class="w-full mt-6 px-6 py-3 gradient-blue text-white rounded-lg hover:shadow-lg font-semibold transition-shadow"
                >
                    Login
                </button>
                
                <!-- Demo Notice -->
                <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                    <p class="text-sm font-semibold text-yellow-800">DEMO MODE</p>
                    <p class="text-xs text-yellow-700 mt-1">For demo purposes:</p>
                    <ul class="text-xs text-yellow-700 mt-1 list-disc pl-4">
                        <li>Employee: Use any ID (password is same as ID)</li>
                        <li>Planner: Password = "admin123"</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Planner Navigation -->
<div id="plannerNav" class="hidden flex flex-wrap justify-center gap-3 mb-6 fade-in">
    <button onclick="setActiveView('upload')" class="px-4 py-2 gradient-blue text-white rounded-lg hover:shadow-lg font-semibold">
        üì§ Upload Data
    </button>
    <button onclick="setActiveView('configureSlots')" class="px-4 py-2 rounded-lg font-semibold bg-white text-gray-700 hover:bg-gray-100 border">
        ‚öôÔ∏è Configure Slots
    </button>
    <button onclick="setActiveView('admin')" class="px-4 py-2 rounded-lg font-semibold bg-white text-gray-700 hover:bg-gray-100 border">
        üëë Admin Panel
    </button>
    <button onclick="setActiveView('changePlannerPassword')" class="px-4 py-2 rounded-lg font-semibold bg-white text-gray-700 hover:bg-gray-100 border">
        üîë Change Password
    </button>
</div>

<!-- Upload Data Modal -->
<div id="uploadModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-xl shadow-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-2xl font-bold text-gray-800">üì§ Upload Employee Data</h3>
            <button onclick="closeUploadModal()" class="text-gray-500 hover:text-gray-700">
                ‚úï
            </button>
        </div>
        
        <!-- File Upload -->
        <div class="mb-8">
            <div class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-blue-500 transition-colors">
                <div class="text-5xl mb-4">üìÑ</div>
                <p class="font-semibold text-gray-700 mb-2">Upload Excel/CSV File</p>
                <p class="text-sm text-gray-500 mb-4">Supported formats: .xlsx, .xls, .csv</p>
                <input
                    type="file"
                    id="fileInput"
                    accept=".xlsx,.xls,.csv"
                    class="hidden"
                    onchange="handleFileSelect(event)"
                />
                <label for="fileInput" class="inline-block px-6 py-3 gradient-blue text-white rounded-lg hover:shadow-lg font-semibold cursor-pointer">
                    Choose File
                </label>
                <p id="fileName" class="text-sm text-gray-600 mt-3"></p>
            </div>
            
            <!-- Required Columns Info -->
            <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                <p class="font-semibold text-blue-800 mb-2">üìã Required Columns:</p>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-sm">
                    <div class="bg-white px-3 py-2 rounded border">ID (Required)</div>
                    <div class="bg-white px-3 py-2 rounded border">Name (Required)</div>
                    <div class="bg-white px-3 py-2 rounded border">Department</div>
                    <div class="bg-white px-3 py-2 rounded border">Seniority Date</div>
                    <div class="bg-white px-3 py-2 rounded border">Email</div>
                    <div class="bg-white px-3 py-2 rounded border">Phone</div>
                    <div class="bg-white px-3 py-2 rounded border">Leave Balance</div>
                    <div class="bg-white px-3 py-2 rounded border">Status</div>
                </div>
            </div>
            
            <!-- Sample Data Section -->
            <div class="mt-6">
                <button onclick="toggleSampleData()" class="flex items-center text-blue-600 hover:text-blue-800 font-semibold">
                    <span>üì• Download Sample Template</span>
                    <span id="sampleToggle" class="ml-2">‚ñº</span>
                </button>
                <div id="sampleData" class="hidden mt-4">
                    <div class="overflow-x-auto">
                        <table class="min-w-full border border-gray-200 text-sm">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="border px-3 py-2">ID</th>
                                    <th class="border px-3 py-2">Name</th>
                                    <th class="border px-3 py-2">Department</th>
                                    <th class="border px-3 py-2">Seniority Date</th>
                                    <th class="border px-3 py-2">Email</th>
                                    <th class="border px-3 py-2">Phone</th>
                                    <th class="border px-3 py-2">Leave Balance</th>
                                    <th class="border px-3 py-2">Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="border px-3 py-2">EMP001</td>
                                    <td class="border px-3 py-2">John Doe</td>
                                    <td class="border px-3 py-2">L4/6-SA</td>
                                    <td class="border px-3 py-2">2020-01-15</td>
                                    <td class="border px-3 py-2">john@example.com</td>
                                    <td class="border px-3 py-2">+1234567890</td>
                                    <td class="border px-3 py-2">30</td>
                                    <td class="border px-3 py-2">Active</td>
                                </tr>
                                <tr class="bg-gray-50">
                                    <td class="border px-3 py-2">EMP002</td>
                                    <td class="border px-3 py-2">Jane Smith</td>
                                    <td class="border px-3 py-2">L5-DEP-DM</td>
                                    <td class="border px-3 py-2">2018-06-20</td>
                                    <td class="border px-3 py-2">jane@example.com</td>
                                    <td class="border px-3 py-2">+1987654321</td>
                                    <td class="border px-3 py-2">35</td>
                                    <td class="border px-3 py-2">Active</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-4 flex gap-3">
                        <button onclick="downloadSampleCSV()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold">
                            Download CSV Template
                        </button>
                        <button onclick="downloadSampleExcel()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold">
                            Download Excel Template
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Upload Preview -->
        <div id="uploadPreview" class="hidden">
            <h4 class="font-bold text-lg mb-3 text-gray-700">üìä Upload Preview</h4>
            <div id="previewTable" class="mb-6 max-h-64 overflow-y-auto border rounded-lg"></div>
            
            <div class="flex justify-between items-center">
                <div id="previewStats" class="text-sm text-gray-600"></div>
                <div class="flex gap-3">
                    <button onclick="processUpload()" id="processBtn" class="px-6 py-2 gradient-green text-white rounded-lg hover:shadow-lg font-semibold">
                        ‚úÖ Process & Save
                    </button>
                    <button onclick="clearUpload()" class="px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 font-semibold">
                        ‚ùå Clear
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Current Employees -->
        <div class="mt-8 pt-6 border-t">
            <div class="flex justify-between items-center mb-4">
                <h4 class="font-bold text-lg text-gray-700">üë• Current Employees</h4>
                <span id="employeeCount" class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-semibold">0</span>
            </div>
            <div id="currentEmployees" class="text-sm text-gray-500 italic">
                No employee data uploaded yet.
            </div>
        </div>
    </div>
</div>

        <!-- Employee Navigation -->
        <div id="employeeNav" class="hidden flex justify-center space-x-4 mb-6 fade-in">
            <button onclick="showMessage('Employee bidding coming soon')" class="px-4 py-2 rounded-lg font-semibold bg-white text-gray-700 hover:bg-gray-100">
                Place Bids
            </button>
            <button onclick="showMessage('Change password coming soon')" class="px-4 py-2 rounded-lg font-semibold bg-white text-gray-700 hover:bg-gray-100">
                Change Password
            </button>
        </div>

        <!-- Main Content Area -->
        <div id="contentArea" class="mt-8"></div>
    </div>

    <script>
        // ==================== STATE MANAGEMENT ====================
        let state = {
            loginType: 'employee',
            currentUser: null,
            userType: null,
            plannerPassword: 'admin123'
        };

        // ==================== UI FUNCTIONS ====================
        function showMessage(message) {
            alert(message);
        }

        function setLoginType(type) {
            state.loginType = type;
            const employeeBtn = document.getElementById('loginTypeEmployee');
            const plannerBtn = document.getElementById('loginTypePlanner');
            
            if (type === 'employee') {
                employeeBtn.className = 'flex-1 px-4 py-3 rounded-lg font-semibold gradient-blue text-white';
                plannerBtn.className = 'flex-1 px-4 py-3 rounded-lg font-semibold bg-gray-200 text-gray-700';
            } else {
                employeeBtn.className = 'flex-1 px-4 py-3 rounded-lg font-semibold bg-gray-200 text-gray-700';
                plannerBtn.className = 'flex-1 px-4 py-3 rounded-lg font-semibold gradient-purple text-white';
            }
            
            renderLoginForm();
        }

        function renderLoginForm() {
            const loginForm = document.getElementById('loginForm');
            
            if (state.loginType === 'planner') {
                loginForm.innerHTML = `
                    <div>
                        <label class="block font-semibold mb-2">Planner Password:</label>
                        <input
                            type="password"
                            id="loginPassword"
                            class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
                            placeholder="Enter planner password"
                            value="admin123"
                        />
                        <div class="mt-2 p-3 bg-purple-50 border border-purple-200 rounded">
                            <p class="text-sm font-semibold text-purple-800">üîë Default Planner Password:</p>
                            <p class="text-lg font-mono font-bold text-purple-900 mt-1">admin123</p>
                        </div>
                    </div>
                `;
            } else {
                loginForm.innerHTML = `
                    <div class="space-y-4">
                        <div>
                            <label class="block font-semibold mb-2">Employee ID:</label>
                            <input
                                type="text"
                                id="loginId"
                                class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                                placeholder="Enter your ID"
                                value="EMP001"
                            />
                        </div>
                        <div>
                            <label class="block font-semibold mb-2">Password:</label>
                            <input
                                type="password"
                                id="loginPassword"
                                class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                                placeholder="Enter your password"
                                value="EMP001"
                            />
                            <div class="mt-2 p-3 bg-blue-50 border border-blue-200 rounded">
                                <p class="text-sm font-semibold text-blue-800">üìå Default Password Info:</p>
                                <p class="text-xs text-blue-700 mt-1">Your password is the same as your Employee ID</p>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function handleLogin() {
            if (state.loginType === 'planner') {
                const password = document.getElementById('loginPassword').value;
                if (password === state.plannerPassword) {
                    state.currentUser = { 
                        type: 'planner', 
                        name: 'Planner Admin',
                        id: 'PLANNER001'
                    };
                    state.userType = 'planner';
                    
                    // Update UI
                    updateUserInfo();
                    document.getElementById('loginView').classList.add('hidden');
                    document.getElementById('plannerNav').classList.remove('hidden');
                    
                    showMessage('‚úÖ Welcome, Planner! You can now access planner features.');
                } else {
                    alert('‚ùå Incorrect planner password. Try: admin123');
                }
            } else {
                const id = document.getElementById('loginId')?.value.trim();
                const password = document.getElementById('loginPassword')?.value.trim();
                
                if (!id) {
                    alert('‚ùå Please enter Employee ID');
                    return;
                }
                
                if (!password) {
                    alert('‚ùå Please enter password');
                    return;
                }
                
                // For demo: accept any ID if password matches ID
                if (password === id) {
                    state.currentUser = { 
                        type: 'employee', 
                        id: id,
                        name: 'Employee ' + id,
                        department: 'Demo Department'
                    };
                    state.userType = 'employee';
                    
                    // Update UI
                    updateUserInfo();
                    document.getElementById('loginView').classList.add('hidden');
                    document.getElementById('employeeNav').classList.remove('hidden');
                    
                    showMessage(`‚úÖ Welcome, Employee ${id}! You can now access employee features.`);
                } else {
                    alert('‚ùå Incorrect password. For demo, use your Employee ID as password.');
                }
            }
        }

        function updateUserInfo() {
            document.getElementById('currentUserName').textContent = state.currentUser?.name || '';
            
            const badge = document.getElementById('userTypeBadge');
            if (state.userType === 'planner') {
                badge.textContent = 'üëë Planner';
                badge.className = 'ml-2 px-2 py-1 text-xs rounded bg-purple-100 text-purple-800';
            } else {
                badge.textContent = 'üë§ Employee';
                badge.className = 'ml-2 px-2 py-1 text-xs rounded bg-blue-100 text-blue-800';
            }
            
            document.getElementById('userInfo').classList.remove('hidden');
        }

        function handleLogout() {
            state.currentUser = null;
            state.userType = null;
            
            // Show login view
            document.getElementById('loginView').classList.remove('hidden');
            document.getElementById('plannerNav').classList.add('hidden');
            document.getElementById('employeeNav').classList.add('hidden');
            document.getElementById('userInfo').classList.add('hidden');
            
            // Reset to employee login
            setLoginType('employee');
            
            showMessage('‚úÖ Logged out successfully');
        }
        // ==================== UPLOAD DATA FUNCTIONS ====================
let uploadedData = [];

function setActiveView(view) {
    if (view === 'upload') {
        openUploadModal();
        updateEmployeeList();
    } else {
        alert(view + ' view coming soon!');
    }
}

function openUploadModal() {
    document.getElementById('uploadModal').classList.remove('hidden');
    updateEmployeeList();
}

function closeUploadModal() {
    document.getElementById('uploadModal').classList.add('hidden');
    document.getElementById('uploadPreview').classList.add('hidden');
    document.getElementById('fileInput').value = '';
    document.getElementById('fileName').textContent = '';
}

function handleFileSelect(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    document.getElementById('fileName').textContent = `Selected: ${file.name}`;
    
    const reader = new FileReader();
    
    reader.onload = function(e) {
        try {
            let data;
            
            if (file.name.endsWith('.csv')) {
                data = parseCSV(e.target.result);
            } else if (file.name.endsWith('.xlsx') || file.name.endsWith('.xls')) {
                // For Excel files - we'll use a simple approach
                alert('Excel parsing requires XLSX library. For now, please save as CSV and upload.');
                return;
            } else {
                alert('Unsupported file format. Please upload CSV, XLSX, or XLS files.');
                return;
            }
            
            if (data.length > 0) {
                uploadedData = data;
                previewUploadData(data);
            }
        } catch (error) {
            alert('Error reading file: ' + error.message);
        }
    };
    
    reader.readAsText(file);
}

function parseCSV(csvText) {
    const lines = csvText.split('\n').filter(line => line.trim() !== '');
    if (lines.length < 2) return [];
    
    const headers = lines[0].split(',').map(h => h.trim());
    
    const data = [];
    for (let i = 1; i < lines.length; i++) {
        const values = lines[i].split(',');
        const row = {};
        
        headers.forEach((header, index) => {
            row[header] = values[index] ? values[index].trim() : '';
        });
        
        // Ensure required fields
        if (!row.ID) row.ID = `EMP${String(data.length + 1).padStart(3, '0')}`;
        if (!row.Name) row.Name = `Employee ${data.length + 1}`;
        if (!row.Department) row.Department = 'General';
        if (!row['Seniority Date']) row['Seniority Date'] = new Date().toISOString().split('T')[0];
        
        data.push(row);
    }
    
    return data;
}

function previewUploadData(data) {
    const previewTable = document.getElementById('previewTable');
    const previewStats = document.getElementById('previewStats');
    
    // Create preview table
    if (data.length > 0) {
        const headers = Object.keys(data[0]);
        let html = `
            <table class="min-w-full border border-gray-200 text-sm">
                <thead class="bg-gray-50">
                    <tr>
                        ${headers.map(h => `<th class="border px-3 py-2">${h}</th>`).join('')}
                    </tr>
                </thead>
                <tbody>
        `;
        
        // Show first 5 rows for preview
        const previewRows = data.slice(0, 5);
        previewRows.forEach(row => {
            html += '<tr>';
            headers.forEach(header => {
                html += `<td class="border px-3 py-2">${row[header] || ''}</td>`;
            });
            html += '</tr>';
        });
        
        if (data.length > 5) {
            html += `
                <tr>
                    <td colspan="${headers.length}" class="border px-3 py-2 text-center text-gray-500">
                        ... and ${data.length - 5} more rows
                    </td>
                </tr>
            `;
        }
        
        html += '</tbody></table>';
        previewTable.innerHTML = html;
        
        // Update stats
        previewStats.innerHTML = `
            <div class="flex items-center gap-4">
                <span>üìä <strong>${data.length}</strong> employees found</span>
                <span>‚úÖ <strong>${headers.length}</strong> columns</span>
                <span>üìÖ Last: ${new Date().toLocaleDateString()}</span>
            </div>
        `;
        
        document.getElementById('uploadPreview').classList.remove('hidden');
    }
}

function processUpload() {
    if (uploadedData.length === 0) {
        alert('No data to process!');
        return;
    }
    
    // Save to localStorage
    localStorage.setItem('employees', JSON.stringify(uploadedData));
    
    // Create default passwords (ID as password)
    const employeePasswords = {};
    uploadedData.forEach(emp => {
        if (emp.ID) {
            employeePasswords[emp.ID] = emp.ID; // Default password = ID
        }
    });
    localStorage.setItem('employeePasswords', JSON.stringify(employeePasswords));
    
    // Update state
    if (typeof state !== 'undefined') {
        state.employees = uploadedData;
        state.employeePasswords = employeePasswords;
    }
    
    alert(`‚úÖ Successfully uploaded ${uploadedData.length} employees!\n\nDefault passwords have been set to their Employee IDs.`);
    
    updateEmployeeList();
    closeUploadModal();
}

function clearUpload() {
    uploadedData = [];
    document.getElementById('uploadPreview').classList.add('hidden');
    document.getElementById('fileInput').value = '';
    document.getElementById('fileName').textContent = '';
}

function updateEmployeeList() {
    const currentEmployeesDiv = document.getElementById('currentEmployees');
    const employeeCountSpan = document.getElementById('employeeCount');
    
    try {
        const savedEmployees = JSON.parse(localStorage.getItem('employees')) || [];
        
        if (savedEmployees.length > 0) {
            employeeCountSpan.textContent = savedEmployees.length;
            
            let html = '<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">';
            
            savedEmployees.slice(0, 6).forEach(emp => {
                html += `
                    <div class="bg-white border rounded-lg p-3 shadow-sm">
                        <div class="font-semibold text-gray-800">${emp.Name || 'Unnamed'}</div>
                        <div class="text-sm text-gray-600">ID: ${emp.ID || 'N/A'}</div>
                        <div class="text-xs text-gray-500">${emp.Department || 'No Department'}</div>
                    </div>
                `;
            });
            
            if (savedEmployees.length > 6) {
                html += `
                    <div class="bg-gray-50 border rounded-lg p-3 flex items-center justify-center">
                        <span class="text-gray-500">+ ${savedEmployees.length - 6} more employees</span>
                    </div>
                `;
            }
            
            html += '</div>';
            currentEmployeesDiv.innerHTML = html;
        } else {
            employeeCountSpan.textContent = '0';
            currentEmployeesDiv.innerHTML = '<p class="text-gray-500 italic">No employee data uploaded yet.</p>';
        }
    } catch (error) {
        employeeCountSpan.textContent = '0';
        currentEmployeesDiv.innerHTML = '<p class="text-red-500">Error loading employee data</p>';
    }
}

function toggleSampleData() {
    const sampleData = document.getElementById('sampleData');
    const toggle = document.getElementById('sampleToggle');
    
    if (sampleData.classList.contains('hidden')) {
        sampleData.classList.remove('hidden');
        toggle.textContent = '‚ñ≤';
    } else {
        sampleData.classList.add('hidden');
        toggle.textContent = '‚ñº';
    }
}

function downloadSampleCSV() {
    const csvContent = `ID,Name,Department,Seniority Date,Email,Phone,Leave Balance,Status
EMP001,John Doe,L4/6-SA,2020-01-15,john@example.com,+1234567890,30,Active
EMP002,Jane Smith,L5-DEP-DM,2018-06-20,jane@example.com,+1987654321,35,Active
EMP003,Robert Johnson,L3-DEP-DC,2019-03-10,robert@example.com,+1122334455,30,Active
EMP004,Emily Davis,L46-DEP-TC,2021-11-05,emily@example.com,+1567890123,30,Active
EMP005,Michael Brown,L5-SA,2017-08-15,michael@example.com,+1345678901,35,Active`;
    
    const blob = new Blob([csvContent], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'employee_template.csv';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}

function downloadSampleExcel() {
    alert('Excel download requires additional libraries. Please use the CSV template for now.');
    downloadSampleCSV(); // Fallback to CSV
}
        /* Add to your existing styles */
#uploadModal::-webkit-scrollbar {
    width: 8px;
}

#uploadModal::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
}

#uploadModal::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 4px;
}

#uploadModal::-webkit-scrollbar-thumb:hover {
    background: #555;
}

        // ==================== INITIALIZATION ====================
        function init() {
            // Hide loading screen after 1 second
            setTimeout(() => {
                document.getElementById('loadingScreen').style.display = 'none';
                
                // Render initial login form
                renderLoginForm();
                
                // Add Enter key support
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !document.getElementById('loginView').classList.contains('hidden')) {
                        handleLogin();
                    }
                });
                
                console.log('‚úÖ System initialized successfully');
            }, 1000);
        }

        // Start the application
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
