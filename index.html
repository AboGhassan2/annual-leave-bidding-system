<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Annual Leave Bidding System</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .gradient-blue {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }
        
        .gradient-purple {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        
        .gradient-red {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        
        .gradient-green {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4 md:p-6">
    <div id="app" class="max-w-7xl mx-auto">
        <!-- Loading Screen -->
        <div id="loadingScreen" class="fixed inset-0 bg-white flex flex-col items-center justify-center z-50">
            <div class="loading-spinner mb-4"></div>
            <p class="text-gray-600 font-semibold">Initializing system...</p>
            <p id="loadingMessage" class="text-sm text-gray-500 mt-2"></p>
        </div>

        <!-- Header -->
        <div class="mb-8 text-center fade-in">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">
                Annual Leave Bidding System
            </h1>
            <div id="userInfo" class="hidden flex justify-center items-center gap-4 mt-4">
                <div class="bg-white px-4 py-2 rounded-lg shadow">
                    <span class="text-sm text-gray-600">Logged in as: </span>
                    <span id="currentUserName" class="font-semibold"></span>
                    <span id="userTypeBadge" class="ml-2 px-2 py-1 text-xs rounded"></span>
                </div>
                <button
                    onclick="handleLogout()"
                    class="px-4 py-2 gradient-red text-white rounded-lg hover:shadow-lg font-semibold transition-shadow"
                >
                    Logout
                </button>
            </div>
        </div>

        <!-- Login View (initial view) -->
        <div id="loginView" class="max-w-md mx-auto mt-10 fade-in">
            <div class="bg-white rounded-xl shadow-xl p-8">
                <h1 class="text-2xl font-bold text-center mb-6 text-blue-600">
                    Annual Leave Bidding System
                </h1>
                
                <div class="mb-6">
                    <label class="block font-semibold mb-3">Login As:</label>
                    <div class="flex gap-4">
                        <button
                            id="loginTypeEmployee"
                            onclick="setLoginType('employee')"
                            class="flex-1 px-4 py-3 rounded-lg font-semibold gradient-blue text-white"
                        >
                            Employee
                        </button>
                        <button
                            id="loginTypePlanner"
                            onclick="setLoginType('planner')"
                            class="flex-1 px-4 py-3 rounded-lg font-semibold bg-gray-200 text-gray-700"
                        >
                            Planner
                        </button>
                    </div>
                </div>

                <div id="loginForm">
                    <!-- Employee login fields will be inserted here -->
                </div>

                <button
                    onclick="handleLogin()"
                    class="w-full mt-6 px-6 py-3 gradient-blue text-white rounded-lg hover:shadow-lg font-semibold transition-shadow"
                >
                    Login
                </button>
                
                <!-- Demo Notice -->
                <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                    <p class="text-sm font-semibold text-yellow-800">DEMO MODE</p>
                    <p class="text-xs text-yellow-700 mt-1">For demo purposes:</p>
                    <ul class="text-xs text-yellow-700 mt-1 list-disc pl-4">
                        <li>Employee: Use any ID (password is same as ID)</li>
                        <li>Planner: Password = "admin123"</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Planner Navigation -->
        <div id="plannerNav" class="hidden flex justify-center space-x-4 mb-6 fade-in">
            <button onclick="showMessage('Planner features coming soon')" class="px-4 py-2 rounded-lg font-semibold bg-white text-gray-700 hover:bg-gray-100">
                Upload Data
            </button>
            <button onclick="showMessage('Planner features coming soon')" class="px-4 py-2 rounded-lg font-semibold bg-white text-gray-700 hover:bg-gray-100">
                Configure Slots
            </button>
            <button onclick="showMessage('Planner features coming soon')" class="px-4 py-2 rounded-lg font-semibold bg-white text-gray-700 hover:bg-gray-100">
                Admin Panel
            </button>
        </div>

        <!-- Employee Navigation -->
        <div id="employeeNav" class="hidden flex justify-center space-x-4 mb-6 fade-in">
            <button onclick="showMessage('Employee bidding coming soon')" class="px-4 py-2 rounded-lg font-semibold bg-white text-gray-700 hover:bg-gray-100">
                Place Bids
            </button>
            <button onclick="showMessage('Change password coming soon')" class="px-4 py-2 rounded-lg font-semibold bg-white text-gray-700 hover:bg-gray-100">
                Change Password
            </button>
        </div>

        <!-- Main Content Area -->
        <div id="contentArea" class="mt-8"></div>
    </div>

    <script>
        // ==================== STATE MANAGEMENT ====================
        let state = {
            loginType: 'employee',
            currentUser: null,
            userType: null,
            plannerPassword: 'admin123'
        };

        // ==================== UI FUNCTIONS ====================
        function showMessage(message) {
            alert(message);
        }

        function setLoginType(type) {
            state.loginType = type;
            const employeeBtn = document.getElementById('loginTypeEmployee');
            const plannerBtn = document.getElementById('loginTypePlanner');
            
            if (type === 'employee') {
                employeeBtn.className = 'flex-1 px-4 py-3 rounded-lg font-semibold gradient-blue text-white';
                plannerBtn.className = 'flex-1 px-4 py-3 rounded-lg font-semibold bg-gray-200 text-gray-700';
            } else {
                employeeBtn.className = 'flex-1 px-4 py-3 rounded-lg font-semibold bg-gray-200 text-gray-700';
                plannerBtn.className = 'flex-1 px-4 py-3 rounded-lg font-semibold gradient-purple text-white';
            }
            
            renderLoginForm();
        }

        function renderLoginForm() {
            const loginForm = document.getElementById('loginForm');
            
            if (state.loginType === 'planner') {
                loginForm.innerHTML = `
                    <div>
                        <label class="block font-semibold mb-2">Planner Password:</label>
                        <input
                            type="password"
                            id="loginPassword"
                            class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none"
                            placeholder="Enter planner password"
                            value="admin123"
                        />
                        <div class="mt-2 p-3 bg-purple-50 border border-purple-200 rounded">
                            <p class="text-sm font-semibold text-purple-800">ðŸ”‘ Default Planner Password:</p>
                            <p class="text-lg font-mono font-bold text-purple-900 mt-1">admin123</p>
                        </div>
                    </div>
                `;
            } else {
                loginForm.innerHTML = `
                    <div class="space-y-4">
                        <div>
                            <label class="block font-semibold mb-2">Employee ID:</label>
                            <input
                                type="text"
                                id="loginId"
                                class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                                placeholder="Enter your ID"
                                value="EMP001"
                            />
                        </div>
                        <div>
                            <label class="block font-semibold mb-2">Password:</label>
                            <input
                                type="password"
                                id="loginPassword"
                                class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                                placeholder="Enter your password"
                                value="EMP001"
                            />
                            <div class="mt-2 p-3 bg-blue-50 border border-blue-200 rounded">
                                <p class="text-sm font-semibold text-blue-800">ðŸ“Œ Default Password Info:</p>
                                <p class="text-xs text-blue-700 mt-1">Your password is the same as your Employee ID</p>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function handleLogin() {
            if (state.loginType === 'planner') {
                const password = document.getElementById('loginPassword').value;
                if (password === state.plannerPassword) {
                    state.currentUser = { 
                        type: 'planner', 
                        name: 'Planner Admin',
                        id: 'PLANNER001'
                    };
                    state.userType = 'planner';
                    
                    // Update UI
                    updateUserInfo();
                    document.getElementById('loginView').classList.add('hidden');
                    document.getElementById('plannerNav').classList.remove('hidden');
                    
                    showMessage('âœ… Welcome, Planner! You can now access planner features.');
                } else {
                    alert('âŒ Incorrect planner password. Try: admin123');
                }
            } else {
                const id = document.getElementById('loginId')?.value.trim();
                const password = document.getElementById('loginPassword')?.value.trim();
                
                if (!id) {
                    alert('âŒ Please enter Employee ID');
                    return;
                }
                
                if (!password) {
                    alert('âŒ Please enter password');
                    return;
                }
                
                // For demo: accept any ID if password matches ID
                if (password === id) {
                    state.currentUser = { 
                        type: 'employee', 
                        id: id,
                        name: 'Employee ' + id,
                        department: 'Demo Department'
                    };
                    state.userType = 'employee';
                    
                    // Update UI
                    updateUserInfo();
                    document.getElementById('loginView').classList.add('hidden');
                    document.getElementById('employeeNav').classList.remove('hidden');
                    
                    showMessage(`âœ… Welcome, Employee ${id}! You can now access employee features.`);
                } else {
                    alert('âŒ Incorrect password. For demo, use your Employee ID as password.');
                }
            }
        }

        function updateUserInfo() {
            document.getElementById('currentUserName').textContent = state.currentUser?.name || '';
            
            const badge = document.getElementById('userTypeBadge');
            if (state.userType === 'planner') {
                badge.textContent = 'ðŸ‘‘ Planner';
                badge.className = 'ml-2 px-2 py-1 text-xs rounded bg-purple-100 text-purple-800';
            } else {
                badge.textContent = 'ðŸ‘¤ Employee';
                badge.className = 'ml-2 px-2 py-1 text-xs rounded bg-blue-100 text-blue-800';
            }
            
            document.getElementById('userInfo').classList.remove('hidden');
        }

        function handleLogout() {
            state.currentUser = null;
            state.userType = null;
            
            // Show login view
            document.getElementById('loginView').classList.remove('hidden');
            document.getElementById('plannerNav').classList.add('hidden');
            document.getElementById('employeeNav').classList.add('hidden');
            document.getElementById('userInfo').classList.add('hidden');
            
            // Reset to employee login
            setLoginType('employee');
            
            showMessage('âœ… Logged out successfully');
        }

        // ==================== INITIALIZATION ====================
        function init() {
            // Hide loading screen after 1 second
            setTimeout(() => {
                document.getElementById('loadingScreen').style.display = 'none';
                
                // Render initial login form
                renderLoginForm();
                
                // Add Enter key support
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !document.getElementById('loginView').classList.contains('hidden')) {
                        handleLogin();
                    }
                });
                
                console.log('âœ… System initialized successfully');
            }, 1000);
        }

        // Start the application
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
