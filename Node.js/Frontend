// Load system data on page load
async function loadSystemData() {
    try {
        const response = await fetch('/api/system-data');
        const data = await response.json();
        
        if (data.status === 'online') {
            // Update UI
            document.getElementById('employee-count').textContent = 
                data.statistics.total_employees;
            
            // Show success message
            console.log(`âœ… System loaded: ${data.employee_count} employees`);
            
            // You can now use data.employees array
            console.log('Sample employee:', data.employees[0]);
        }
    } catch (error) {
        console.error('Error loading system:', error);
    }
}

// Employee login
async function loginEmployee() {
    const employeeId = document.getElementById('employee-id').value;
    const password = document.getElementById('password').value;
    
    const response = await fetch('/api/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ employeeId, password })
    });
    
    const result = await response.json();
    
    if (result.success) {
        // Store user data and redirect
        localStorage.setItem('user', JSON.stringify(result.user));
        window.location.href = '/dashboard.html';
    } else {
        alert(result.message);
    }
}

// Sync database
async function syncDatabase() {
    const response = await fetch('/api/sync', { method: 'POST' });
    const result = await response.json();
    alert(result.message);
    loadSystemData(); // Reload data
}
